<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The Tengine Web Server</title>
  <link rel="stylesheet" type="text/css" href="../style.css">
  <script type="text/javascript" src="/js/??ga.js,correctpng.js?v=1"></script>
</head>

<body>
<div id="container">
  <div id="menu_cn">
    <ul>
      <li><a href="../download_cn.html"><img src="../images/icon-down.png"/>下载</a></li>
      <li><a href="../source_cn.html"><img src="../images/icon_code.png"/>源码</a></li>
      <li><a href="../documentation_cn.html"><img src="../images/icon-doc.png"/>文档</a></li>
      <li><a href="../faq_cn.html"><img src="../images/icon-faq.png"/>FAQ</a></li>
      <li><a href="../contact_cn.html"><img src="../images/icon-contact.png"/>联系我们</a></li>
      <li id="book"><a href="../book/">开发教程</a></li>
      <li id="lang"><a href="../index_cn.html">中文</a> | <a href="../index.html">English</a></li>
    </ul>
  </div>
  <div id="logo"><a href="../index_cn.html"><img src="../images/logo.png" alt="tengine" /></a></div>
  <div class="clear"></div>
  <div class="one_col more_padding font16">


<div class="module">ngx_http_spdy_module</div>

<p>Tengine对SPDY模块增加SPDY/3协议的支持。以下是新增的指令。</p>

<div class="dh">Directives</div>

<br /><br />

<div class="directive"><p>Syntax: <strong>spdy_version</strong> [2|3]</p>

<p>Default: 3</p>

<p>Context: http, server</p></div>

<p>指定SPDY协议使用的版本。默认是SPDY/3。</p>

<br /><br />

<div class="directive"><p>Syntax: <strong>spdy_flow_control</strong> on|off</p>

<p>Default: on</p>

<p>Context: http, server</p></div>

<p>打开或关闭SPDY/3的流控功能。</p>

<br /><br />

<div class="directive"><p>Syntax: <strong>spdy_init_recv_window_size</strong> size</p>

<p>Default: 64k</p>

<p>Context: http, server</p></div>

<p>指定SPDY/3服务器的接收窗口大小。接收窗口大小默认值是64K。服务器每次会在接收窗口使用超过一半时给客户端发送窗口更新帧(WINDOW UPDATE frame)。</p>

<br /><br />

<div class="directive"><p>Syntax: listen address[:port] [spdy_detect] [ssl]</p>

<p>Default:</p>

<p>Context: listen directive</p></div>

<p>启用这个指令时，SPDY协议和HTTP协议可以工作在同一个端口上。注意：服务器通过探测每个TCP连接上的首字节来判断此连接上是SPDY协议还是HTTP协议(如果首字节是0x80或者0x00，则认为是SPDY协议)。</p>

<p>服务器在80端口上同时监听SPDY连接和HTTP连接，配置如下：</p>

<pre class="mod_example"><code>listen 80 spdy_detect;
</code></pre>

<p>服务器在443端口上自动探测SSL层下是SPDY协议还是HTTP协议。注意服务器不会通过TLS扩展(NPN)来协商是SPDY协议还是HTTP协议，配置如下：</p>

<pre class="mod_example"><code>listen 443 ssl spdy_detect;
</code></pre>

<p>服务器在443端口上既可以自动探测SSL层下是SPDY协议还是HTTP协议，也可以通过TLS扩展(NPN)来协商是SPDY协议还是HTTP协议，配置如下：</p>

<pre class="mod_example"><code>listen 443 ssl spdy_detect spdy;
</code></pre>
  </div>
</div>
<div id="copyright">&copy; 2011-2014 Taobao Inc. All rights reserved.</div>
</body>
</html>
