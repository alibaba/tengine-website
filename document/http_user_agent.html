<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The Tengine Web Server</title>
  <link rel="stylesheet" type="text/css" href="../style.css">
  <script type="text/javascript" src="/js/??ga.js,correctpng.js?v=1"></script>
</head>

<body>
<div id="container">
  <div id="menu">
    <ul>
      <li><a href="../download.html"><img src="../images/icon-down.png"/>Download</a></li>
      <li><a href="../source.html"><img src="../images/icon_code.png"/>Source</a></li>
      <li><a href="../documentation.html"><img src="../images/icon-doc.png"/>Documentation</a></li>
      <li><a href="../faq.html"><img src="../images/icon-faq.png"/>FAQ</a></li>
      <li><a href="../contact.html"><img src="../images/icon-contact.png"/>Contact</a></li>
	    <li id="lang"><a href="../index_cn.html">中文</a> | <a href="../index.html">English</a></li>
    </ul>
  </div>
  <div id="logo"><a href="../index.html"><img src="../images/logo.png" alt="tengine" /></a></div>
  <div class="clear"></div>
  <div class="one_col more_padding font16">


<div class="module">ngx_http_user_agent_module</div>

<p>This module can analyse the header of User-Agent.</p>

<p>This module is enabled by default. It can be disabled with the --without-http<em>user</em>agent_module configuration parameter.</p>

<div class="dh">Examples</div>

<pre class="mod_example"><code>http {
    user_agent $ngx_browser {
        default                     unknown;


        greedy                      Firefox;

        Chrome      18.0+           chrome18;
        Chrome      17.0~17.9999    chrome17;
        Chrome      5.0-            chrome_low;
    }
}
</code></pre>

<div class="dh">Directives</div>

<br /><br />

<div class="directive"><p>Syntax: <strong>user_agent</strong> <code>$variable_name</code>   </p>

<p>Default: none   </p>

<p>Context: http   </p></div>

<p>Set a variable whose value depends on the value of user_agent string.This block contains three parts, <strong>default</strong>, <strong>greedy</strong> and <strong>analysis items</strong>.</p>

<br /><br />

<div class="directive"><p>Syntax: <strong>default</strong> <code>value</code>           </p>

<p>Default: none           </p>

<p>Context: user_agent block  </p></div>

<p>The default variable value if the user_agent string can't match any of the item.     </p>

<br /><br />

<div class="directive"><p>Syntax: <strong>greedy</strong> <code>keyword</code></p>

<p>Default: none  </p>

<p>Context: user_agent block  </p></div>

<p>If the keyword is greedy, it will continue to scan the user-agent string until it can find other item which is not greedy. If it can't find any other item, this keyword will be returned at last.    </p>

<p>e.g.: "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.112 Safari/535.1",this user_agent string will return Chrome13,if configuration file like this:    </p>

<pre class="mod_example"><code>greedy                  Safari;     
Chrome  13.0~13.9999    chrome13;
</code></pre>

<br /><br />

<div class="directive"><p>Syntax: <strong>keyword</strong> <code>version value</code> <br />
Default: none <br />
Context: user_agent block   </p>

<ul>
<li><em>keyword</em>: This is the word we want to match from the user_agent string.    </li>
<li><em>version</em>: the version of keyword. <br />
<ul>
<li>version+:greater or equal should be matched;    </li>
<li>version-:less or equal should be matched;   </li>
<li>version:equal should be matched;     </li>
<li>version1~version2:matched in [version1,version2];    </li>
</ul></li>
<li><em>value</em>:If this item is matched, the value will be filled to the defined variable.  </li>
</ul>
  </div>
</div>
<div id="copyright">&copy; 2011-2014 Taobao Inc. All rights reserved.</div>
</body>
</html>
