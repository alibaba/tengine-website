<!DOCTYPE html><html lang="cn" dir="ltr" class="no-js" data-env="dev-env"><head><meta name="generator" content="Hexo 3.9.0"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SNH2MHXGCW"></script><script>window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-SNH2MHXGCW');</script><meta charset="utf-8"><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Designed by 阿里云UED AX"><title>ngx_http_core_module - The Tengine Web Server</title><meta name="description" content="Tengine added some enhancements to this module. The new directives are listed below.DirectivesSyntax: listen 443 ssl http2 spdyDefault: -Context: serverDefine checking whether client supports HTTP v2"><meta property="og:type" content="article"><meta property="og:title" content="ngx_http_core_module"><meta property="og:url" content="http://tengine.taobao.org/document/http_core.html"><meta property="og:site_name" content="The Tengine Web Server"><meta property="og:description" content="Tengine added some enhancements to this module. The new directives are listed below.DirectivesSyntax: listen 443 ssl http2 spdyDefault: -Context: serverDefine checking whether client supports HTTP v2"><meta property="og:locale" content="default"><meta property="og:updated_time" content="2023-11-06T07:34:16.642Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ngx_http_core_module"><meta name="twitter:description" content="Tengine added some enhancements to this module. The new directives are listed below.DirectivesSyntax: listen 443 ssl http2 spdyDefault: -Context: serverDefine checking whether client supports HTTP v2"><link rel="alternate" href="/atom.xml" title="The Tengine Web Server" type="application/atom+xml"><link rel="stylesheet" href="/css/base.min.css"><link rel="stylesheet" href="/css/main.css"></head><body class="page-is-loading"><div class="container-fluid"><div class="row global-header"><div class="container"><div class="row"><div class="col-lg-12"><div class="row"><div class="navbar-header col-lg-2 col-xs-12"><button aria-controls="nav-menu" aria-expanded="false" class="navbar-toggle collapsed" data-target="#nav-menu" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><h1 class="text-muted site-logo navbar-brand"><a href="/" id="logo" class="text-hide">The Tengine Web Server</a></h1></div><div class="col-lg-10 col-xs-12"><nav id="nav-menu" class="navbar-collapse collapse" aria-expanded="false"><ul class="nav navbar-nav navbar-right"><li role="presentation"><a class="menu-item" href="/documentation.html">Tengine</a></li><li role="presentation"><a class="menu-item" href="/guide.html">Tengine-Ingress</a></li><li role="presentation"><a class="menu-item" href="/blog.html">Blog</a></li><li role="presentation"><a class="menu-item" href="/download.html">Download</a></li><li role="presentation"><a class="menu-item" href="/source.html">Source</a></li><li role="presentation"><a class="menu-item" href="/contact.html">Contact</a></li><li role="presentation"><a class="menu-item" href="/faq.html">FAQ</a></li><li role="presentation" class="col-hide-xs"><select class="lang-switch pull-right"></select></li><li role="presentation" class="hide"><a href="#"><i class="fa fa-bars" aria-hidden="true"></i></a></li></ul></nav></div></div></div></div></div></div></div><div class="container-fluid" id="main"><section class="row"><div class="fluid-container"><div class="container"><article id="post-document/http_core" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">ngx_http_core_module</h1></header><div class="article-entry" itemprop="articleBody"><p>Tengine added some enhancements to this module. The new directives are listed below.</p><h2 id="Directives"><a href="#Directives" class="headerlink" title="Directives"></a>Directives</h2><blockquote><p>Syntax: <strong>listen</strong> 443 <code>ssl http2 spdy</code><br>Default: -<br>Context: <code>server</code></p></blockquote><p>Define checking whether client supports HTTP v2 or SPDY v3 protocol with ALPN or NPN, and Tengine will select a protocol to deal with SSL offload, from HTTP v2, SPDY v3, and HTTP v1.x, in order of such priority.</p><hr><blockquote><p>Syntax: <strong>client_body_buffers</strong> <code>number size</code><br>Default: 16 4k/8k<br>Context: <code>http, server, location</code></p></blockquote><p>Specify the number and size of buffers used when reading non buffered client request body, all the buffers are stored in the memory. Buffers are allocated only on demand. By default, the buffer size is equal to your OS&#39;s pagesize. The total buffer size should be larger than <code>client_body_postpone_size</code>, otherwise, it will be enlarged by force.</p><hr><blockquote><p>Syntax: <strong>client_body_postpone_size</strong> <code>size</code><br>Default: 64k<br>Context: <code>http, server, location</code></p></blockquote><p>When you turn off the <code>proxy_request_buffering</code> or <code>fastcgi_request_buffering</code>, Tengine will send the body to backend either it receives more than <code>size</code> data or the whole request body has been received. It can save the connection and reduce the network system call number with backend.</p><hr><blockquote><p>Syntax: <strong>proxy_request_buffering</strong> <code>on | off</code><br>Default: <code>on</code><br>Context: <code>http, server, location</code></p></blockquote><p>Specify the request body will be buffered to the disk or not. If it&#39;s off, the request body will be stored in the memory and sent to backend after Tengine receives more than <code>client_body_postpone_size</code> data. It can avoid the disk IO with large request body.</p><p>By default in the buffered mode, the whole request body larger than the <code>client_body_buffer_size</code> will always be saved into the disk. This behavior may increase the server load greatly with heavy upload application.</p><p>Note that, if you turn it off, the nginx retry mechanism with unsuccessful response will be broken after you sent part of the request to backend. It just returns 500 directly when it encounters an unsuccessful response. This directive also breaks these variables: $request_body, $request_body_file. You should not use them any more while their values are incomplete.</p><p>Also note that, enabling spdy will prevent <code>proxy_request_buffering off</code> from taking effect.</p><hr><blockquote><p>Syntax: <strong>fastcgi_request_buffering</strong> <code>on | off</code><br>Default: <code>on</code><br>Context: <code>http, server, location</code></p></blockquote><p>The same as <code>proxy_request_buffering</code>.</p><hr><blockquote><p>Syntax: <strong>resolver</strong> <code>address ... [valid=time] [ipv6=on|off];</code><br>Default: <code>--</code><br>Context: <code>http, server, location</code></p></blockquote><p>Tengine will parse nameserver in /etc/resolv.conf as DNS server when resolver is not assigned.</p><hr><blockquote><p>Syntax: <strong>gzip_clear_etag</strong> <code>on | off</code><br>Default: <code>on</code><br>Context: <code>http, server, location</code></p></blockquote><p>Determines whether gzip module should clear the “ETag” response header field.</p></div></div></article></div></div></section></div><div class="container-fluid global-footer"><div class="row"><div class="container"><div class="row"><div class="col-lg-6 col-xs-6"><div class="footer-logo"></div></div><div class="col-lg-6 col-xs-6 clearfix"><select class="lang-switch pull-right"></select></div><div class="col-lg-12 col-lg-offset-0 col-xs-offset-1 col-xs-10"><span class="footer-text copyright">&copy; 2011-2023 <a href="https://www.alibabagroup.com/" target="_blank">Alibaba Group</a>. All rights reserved.</span> <span class="footer-text design-by">Designed by Aliyun UED AX, Proudly powered by <a href="https://github.com/alibaba/tengine-ingress" target="_blank">Tengine-Ingress</a> on <a href="https://www.aliyun.com/" target="_blank">Aliyun</a>.</span></div></div></div></div></div><script src="/js/base.min.js"></script><script src="/js/app.min.js"></script></body></html>