<!DOCTYPE html><html lang="cn" dir="ltr" class="no-js" data-env="dev-env"><head><meta charset="utf-8"><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Designed by 阿里云UED AX"><meta name="robots" content="index, follow"><link rel="dns-prefetch" href="//"><link rel="dns-prefetch" href="//"><link rel="shortcut icon" href="///favicon.ico?v=s&t=20150120-2R"><title>Core functionality - The Tengine Web Server</title><meta name="description" content="Directives12345Syntax: **force_exit** _exit_time;_Default: &amp;#x2014;Context: mainforce worker processes to exit after _exittime.The force_exit support is not enabled by default. You should compile it e"><meta property="og:type" content="article"><meta property="og:title" content="Core functionality"><meta property="og:url" content="http://tengine.taobao.org/document/core.html"><meta property="og:site_name" content="The Tengine Web Server"><meta property="og:description" content="Directives12345Syntax: **force_exit** _exit_time;_Default: &amp;#x2014;Context: mainforce worker processes to exit after _exittime.The force_exit support is not enabled by default. You should compile it e"><meta property="og:updated_time" content="2016-12-02T01:15:20.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Core functionality"><meta name="twitter:description" content="Directives12345Syntax: **force_exit** _exit_time;_Default: &amp;#x2014;Context: mainforce worker processes to exit after _exittime.The force_exit support is not enabled by default. You should compile it e"><link rel="alternate" href="/atom.xml" title="The Tengine Web Server" type="application/atom+xml"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/main.css"></head><body class="page-is-loading"><div class="fluid-container global-header"><div class="container"><div class="header clearfix"><nav><ul class="nav nav-pills pull-right"><li role="presentation"><a href="/download.html">下载</a></li><li role="presentation"><a href="/source.html">源码</a></li><li role="presentation"><a href="/documentation.html">文档</a></li><li role="presentation"><a href="/faq.html">FAQ</a></li><li role="presentation"><a href="/contact.html">联系我们</a></li><li role="presentation"><a href="http://tengine.taobao.org/book/">教程</a></li><li role="presentation" class="hide"><a href="#"><i class="fa fa-bars" aria-hidden="true"></i></a></li></ul></nav><h1 class="text-muted site-logo"><a href="/" id="logo">The Tengine Web Server</a></h1></div></div></div><div class="outer"><section id="main"><div class="fluid-container"><div class="container"><article id="post-document/core" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Core functionality</h1></header><div class="article-entry" itemprop="articleBody"><h2 id="directives"><a href="#Directives" class="headerlink" title="Directives"></a>Directives</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **force_exit** _exit_time;_</div><div class="line"></div><div class="line">Default: &#x2014;</div><div class="line"></div><div class="line">Context: main</div></pre></td></tr></table></figure><p>force worker processes to exit after _exit<em>time</em>.</p><p>The force_exit support is not enabled by default. You should compile it explicitly:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./configure --with-force-exit</div></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **worker_processes** [num | auto]</div><div class="line"></div><div class="line">Default: worker_processes auto</div><div class="line"></div><div class="line">Context: main</div></pre></td></tr></table></figure><p>Set the number of worker processes.<br>When set to &#x2018;auto&#x2019;, which is also the default behavior, Tengine will create the same number of worker processes as your CPUs.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **worker_cpu_affinity** [mask1 mask2 mask3 ... | auto | off]</div><div class="line"></div><div class="line">Default: worker_cpu_affinity off</div><div class="line"></div><div class="line">Context: main</div></pre></td></tr></table></figure><p>Bind worker processes to the sets of CPUs.<br>When set to &#x2018;auto&#x2019;, Tengine will automatically bind each worker process to a specific CPU. If the number of worker processes is larger than the number of your CPUs, then the rest of worker processes will be bond in descendant order. For example, if there are 8 CPUs in your system:</p><ul><li><p>When the process number set to 4, the binding bitmap will be:</p><p>10000000 01000000 00100000 00010000</p></li><li><p>When the process number set to 8, the binding bitmap will be:</p><p>10000000 01000000 00100000 00010000 00001000 00000100 00000010 00000001</p></li><li><p>When the process number set to 10, the binding bitmap will be:</p><p>10000000 01000000 00100000 00010000 00001000 00000100 00000010 00000001 10000000 01000000</p></li></ul><p>When set to &#x2018;off&#x2019;, Tengine will disable the CPU affinity.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **error_page** code ... [default] [=[response]]</div><div class="line"></div><div class="line">Default: -</div><div class="line"></div><div class="line">Context: http, server, location, if in location</div></pre></td></tr></table></figure><p>This directive can specify the page for the specific HTTP response status.</p><ul><li>Tengine also has a &#x2018;default&#x2019; parameter which can be used to clear the error_page settings in higher level blocks.</li></ul><p>For example:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">http {</div><div class="line">    error_page 404 /404.html;</div><div class="line"></div><div class="line">    server {</div><div class="line">        error_page 404 default;</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure><p>In this server block, the 404 error page will be set to Tengine&#x2019;s default 404 page.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **request_time_cache** [on | off]</div><div class="line"></div><div class="line">Default: request_time_cache on</div><div class="line"></div><div class="line">Context: http, server, location</div></pre></td></tr></table></figure><p>When set to &#x2018;off&#x2019;, Tengine will get a more precise time on $request_time, $request_time_msec, $request_time_usec because it does not use time cache.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **log_empty_request** [on | off]</div><div class="line"></div><div class="line">Default: log_empty_request on</div><div class="line"></div><div class="line">Context: http, server, location</div></pre></td></tr></table></figure><p>When you specify it &#x2018;off&#x2019;, Tengine will not record any access log when a client issues a connection without any data being sent.<br>By default, it&#x2019;s on. In the above case, it will print a 400 Bad Request message into the access log.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **server_admin** admin</div><div class="line"></div><div class="line">Default: none</div><div class="line"></div><div class="line">Context: http, server, location</div></pre></td></tr></table></figure><p>Specify the administrator&#x2019;s information, which will appear in a default 4xx/5xx error response when &#x2018;server_info&#x2019; is turned on.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **server_info** on | off </div><div class="line"></div><div class="line">Default: server_info on</div><div class="line"></div><div class="line">Context: http, server, location</div></pre></td></tr></table></figure><p>Show up the server information in a default 4xx/5xx error response. The URL accessed by the user, the hostname serving the request, and the time are included.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **server_tag** off | customized_tag </div><div class="line"></div><div class="line">Default: none</div><div class="line"></div><div class="line">Context: http, server, location</div></pre></td></tr></table></figure><p>Specify the customized &#x2018;Server&#x2019; header in the HTTP responses, for example, &#x2018;Apache/2.2.22&#x2019;, &#x2018;IIS 6.0&#x2019;, &#x2018;Lighttpd&#x2019;, etc. You could also suppress the &#x2018;Server&#x2019; header by setting it to &#x2018;off&#x2019;.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Syntax: **reuse_port** on |  off</div><div class="line"></div><div class="line">Default: reuse_port off</div><div class="line"></div><div class="line">Context: events</div></pre></td></tr></table></figure><p>turn on support for SO_REUSEPORT socket option. This option is supported since Linux 3.9.</p><p><a href="benchmark.html">benchmark</a><br><!-- [benchmark](../download/reuseport.pdf) --></p></div></div></article></div></div></section></div><div class="fluid-container global-footer"><div class="container"><div class="row"><div class="col-lg-6"><div class="footer-logo"></div></div><div class="col-lg-6 clearfix"><select class="lang-switch pull-right"></select></div></div><div class="row"><div class="col-lg-12"><span class="footer-text copyright">&copy; 2011-2016 Alibaba Inc. All rights reserved.</span> <span class="footer-text design-by">Designed by 阿里云UED AX</span></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/bootstrap.js"></script><script src="/js/particles.min.js"></script><script src="/js/app.js"></script></body></html>