<!DOCTYPE html><html lang="cn" dir="ltr" class="no-js" data-env="dev-env"><head><meta name="generator" content="Hexo 3.9.0"><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SNH2MHXGCW"></script><script>window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-SNH2MHXGCW');</script><meta charset="utf-8"><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Designed by 阿里云UED AX"><title>ngx_http_xquic_module - The Tengine Web Server</title><meta name="description" content="Tengine XQUIC Module is used to enable QUIC/HTTP3 listening service on the server side.The configuration consists of two parts: HTTP main conf and listen configuration. Marked &amp;quot;required options&amp;q"><meta property="og:type" content="article"><meta property="og:title" content="ngx_http_xquic_module"><meta property="og:url" content="http://tengine.taobao.org/document/xquic.html"><meta property="og:site_name" content="The Tengine Web Server"><meta property="og:description" content="Tengine XQUIC Module is used to enable QUIC/HTTP3 listening service on the server side.The configuration consists of two parts: HTTP main conf and listen configuration. Marked &amp;quot;required options&amp;q"><meta property="og:locale" content="default"><meta property="og:updated_time" content="2023-11-09T13:12:36.720Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ngx_http_xquic_module"><meta name="twitter:description" content="Tengine XQUIC Module is used to enable QUIC/HTTP3 listening service on the server side.The configuration consists of two parts: HTTP main conf and listen configuration. Marked &amp;quot;required options&amp;q"><link rel="alternate" href="/atom.xml" title="The Tengine Web Server" type="application/atom+xml"><link rel="stylesheet" href="/css/base.min.css"><link rel="stylesheet" href="/css/main.css"></head><body class="page-is-loading"><div class="container-fluid"><div class="row global-header"><div class="container"><div class="row"><div class="col-lg-12"><div class="row"><div class="navbar-header col-lg-2 col-xs-12"><button aria-controls="nav-menu" aria-expanded="false" class="navbar-toggle collapsed" data-target="#nav-menu" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><h1 class="text-muted site-logo navbar-brand"><a href="/" id="logo" class="text-hide">The Tengine Web Server</a></h1></div><div class="col-lg-10 col-xs-12"><nav id="nav-menu" class="navbar-collapse collapse" aria-expanded="false"><ul class="nav navbar-nav navbar-right"><li role="presentation"><a class="menu-item" href="/documentation.html">Tengine</a></li><li role="presentation"><a class="menu-item" href="/guide.html">Tengine-Ingress</a></li><li role="presentation"><a class="menu-item" href="/blog.html">Blog</a></li><li role="presentation"><a class="menu-item" href="/download.html">Download</a></li><li role="presentation"><a class="menu-item" href="/source.html">Source</a></li><li role="presentation"><a class="menu-item" href="/contact.html">Contact</a></li><li role="presentation"><a class="menu-item" href="/faq.html">FAQ</a></li><li role="presentation" class="col-hide-xs"><select class="lang-switch pull-right"></select></li><li role="presentation" class="hide"><a href="#"><i class="fa fa-bars" aria-hidden="true"></i></a></li></ul></nav></div></div></div></div></div></div></div><div class="container-fluid" id="main"><section class="row"><div class="fluid-container"><div class="container"><article id="post-document/xquic" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">ngx_http_xquic_module</h1></header><div class="article-entry" itemprop="articleBody"><p>Tengine XQUIC Module is used to enable QUIC/HTTP3 listening service on the server side.</p><p>The configuration consists of two parts: HTTP main conf and listen configuration. Marked &quot;required options&quot; are required configuration items to enable QUIC, while unmarked ones are optional configuration items (if not qualified, the default configuration is enabled).</p><h2 id="Configuration-example"><a href="#Configuration-example" class="headerlink" title="Configuration example"></a>Configuration example</h2><h2 id="Configuration-file-conf-nginx-conf"><a href="#Configuration-file-conf-nginx-conf" class="headerlink" title="Configuration file: conf/nginx.conf"></a>Configuration file: conf/nginx.conf</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xquic_log   &quot;pipe:rollback /home/admin/tengine/logs/tengine-xquic.log baknum=10 maxsize=1G interval=1d adjust=600&quot; info;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line"></span><br><span class="line">    ## add for xquic ####</span><br><span class="line">    xquic_ssl_certificate        /etc/tengine/ssl/certificate.crt;</span><br><span class="line">    xquic_ssl_certificate_key    /etc/tengine/ssl/certificate.key;</span><br><span class="line">    xquic_ssl_session_ticket_key /etc/tengine/ssl/session_ticket.key;</span><br><span class="line"></span><br><span class="line">    xquic_congestion_control bbr;</span><br><span class="line">    xquic_socket_rcvbuf 5242880;</span><br><span class="line">    xquic_socket_sndbuf 5242880;</span><br><span class="line">    xquic_anti_amplification_limit 5;</span><br><span class="line">    ## end for xquic ####</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 2443 xquic reuseport;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><blockquote><p>(required)<br>Syntax: <strong>listen</strong> 2443 <code>reuseport xquic</code>;<br>Default: -<br>Context: <code>server</code></p></blockquote><p>Adding the xquic option to the listen command indicates that the port enables quic/http3 listening and checking, and is generally used with reuseport.</p><p>This configuration item strongly relies on the xquic certificate configuration item to enable TLS/1.3 handshake and certificate verification.</p><hr><blockquote><p>(required)<br>Syntax: <strong>xquic_ssl_certificate</strong> <code>/certificate/file path</code>;<br>Default: -<br>Context: <code>http</code></p></blockquote><p>Read the certificate file required for the quic (tls/1.3) encryption handshake from the specified directory in the configuration.</p><hr><blockquote><p>(required)<br>Syntax: <strong>xquic_ssl_certificate_key</strong> <code>/certificate key/file path</code>;<br>Default: -<br>Context: <code>http</code></p></blockquote><p>Read the certificate private key file required for the quic (tls/1.3) encryption handshake from the specified directory in the configuration. The private key is matched with the certificate public key.</p><hr><blockquote><p>Syntax: <strong>xquic_ssl_session_ticket_key</strong> <code>/ticket/file path</code>;<br>Default: -<br>Context: <code>http</code></p></blockquote><p>Read the secret key file required for quic (tls/1.3) encrypted session ticket from the specified directory in the configuration. The format is the same as ssl_session_ticket_key. The session ticket function can be enabled only after configuration.</p><hr><blockquote><p>Syntax: <strong>xquic_log</strong> <code>&quot;pipe:rollback /home/admin/tengine/logs/tengine-xquic.log baknum=10 maxsize=1G interval=1d adjust=600&quot; info</code>;<br>Default: -<br>Context: <code>main</code></p></blockquote><p>Print xquic protocol stack statistical logs to the configured specified directory. It supports rolling log mode (can be linked with the rollback module). The xquic log level can be used to control log information.</p><p>The optional range of log levels is:</p><ul><li>report</li><li>fatal</li><li>error</li><li>warn</li><li>stats</li><li>info</li><li>debug</li></ul><p>Similar to the Tengine log level, log content with log level &gt;= configuration level will be printed. For production environments, it is recommended to configure it to info.<br>The Debug log level will contain a large number of debugging logs, which will have an impact on performance. It is generally enabled for daily testing and should not be enabled in production environments.</p><hr><blockquote><p>Syntax: <strong>xquic_congestion_control</strong> <code>bbr</code>;<br>Default: <code>bbr</code><br>Context: <code>http</code></p></blockquote><p>Configure the congestion control algorithm used by xquic. The currently supported algorithm types are:</p><ul><li>reno</li><li>cubic</li><li>bbr</li></ul><p>BBR currently corresponds to BBR v1, and the default value is bbr.(The default for Tengine 3.1.0 and previous versions is cubic.)</p><hr><blockquote><p>Syntax: <strong>xquic_socket_rcvbuf</strong> <code>5242880</code>;<br>Default: <code>1048576</code><br>Context: <code>http</code></p></blockquote><p>xquic uses socket rcvbuf size setting. The default size is 1M. After configuration, it will use socket option to set it to the kernel.</p><hr><blockquote><p>Syntax: <strong>xquic_socket_sndbuf</strong> <code>5242880</code>;<br>Default: <code>1048576</code><br>Context: <code>http</code></p></blockquote><p>xquic uses socket sndbuf size setting. The default size is 1M. After configuration, it will use socket option to set it to the kernel.</p><hr><blockquote><p>Syntax: <strong>xquic_anti_amplification_limit</strong> <code>5</code>;<br>Default: <code>5</code><br>Context: <code>http</code></p></blockquote><p>The reflection amplification factor limited by xquic during the handshake. This parameter is used to limit the amount of data returned by the server by N before the handshake completes address verification. (that is, the amount of data returned by the server &lt;= the amount of data sent by the client * N).</p><p>The recommendation in the RFC draft for this parameter is not to exceed 3 times. Considering the size of the certificate returned by the actual handshake, the maximum setting is generally 5 times (larger is not recommended from a security perspective).</p></div></div></article></div></div></section></div><div class="container-fluid global-footer"><div class="row"><div class="container"><div class="row"><div class="col-lg-6 col-xs-6"><div class="footer-logo"></div></div><div class="col-lg-6 col-xs-6 clearfix"><select class="lang-switch pull-right"></select></div><div class="col-lg-12 col-lg-offset-0 col-xs-offset-1 col-xs-10"><span class="footer-text copyright">&copy; 2011-2023 <a href="https://www.alibabagroup.com/" target="_blank">Alibaba Group</a>. All rights reserved.</span> <span class="footer-text design-by">Designed by Aliyun UED AX, Proudly powered by <a href="https://github.com/alibaba/tengine-ingress" target="_blank">Tengine-Ingress</a> on <a href="https://www.aliyun.com/" target="_blank">Aliyun</a>.</span></div></div></div></div></div><script src="/js/base.min.js"></script><script src="/js/app.min.js"></script></body></html>